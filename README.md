###目标
设计实现一个安卓垃圾文件删除的app

### 交互原则（重要，请一定要遵守）
1. Composer交互原则：
   - 简洁，不要过多解释问题，快速修改代码为主要目的
   - 上下文永远选择【README.md】
   - 当用户说【提交】时，自动提交所有修改的代码并推送到GIT
   - 当用户说【编译】时，自动执行[./gradlew clean installDebug]
   - 当用户说【运行】时，自动执行[./run-app.sh]
2. 功能开发原则：
   - 不允许直接追加任何新的功能
   - 仅允许对现有功能进行：
     * 修复
     * 健壮性强化
     * 日志补充
     * 注释完善
3. 功能变更流程：
   - 新功能必须由用户发起
   - 或在获得用户确认后才能追加
   - 特别注意：已完成功能不得擅自改变设计初衷，避免后续需要重新Rework或删除
4. 变更关联修正
   - 每次新增或更新资源配置要检查相关资源引用是否存在，不存在的自动创建，避免多次编译交互
   - 每次变更或删除资源配置后，要分析关联配置和代码中是否有遗留废弃的引用，自动删除，避免多次编译交互
5. 自动编译及修正错误
   - 每次修改代码和配置文件之后，请自动运行[./run-app.sh]命令进行完全清理和编译，然后启动APP
   - 如果编译出现错误，请自动分析错误原因并修复，包括但不限于：
     * 缺少导入语句的自动添加
     * 缺少方法的自动实现
     * 类型不匹配的自动转换
     * 资源引用错误的自动修复
   - 修复编译错误时需要遵循以下原则：
     * 保持代码风格一致性
     * 确保修复不会引入新的问题
     * 添加必要的日志记录
     * 保持代码的健壮性
   - 每次修改后要确保：
     * 代码能够正常编译
     * 功能逻辑正确
     * 不破坏现有功能
     * 符合项目规范

###背景
很多人使用安卓手机默认打开了通话录音，时间长了，通话录音占用大量的存储空间，但是很多通话录音是用户不希望保存或希望过一段时间就删除掉的；时间久了，没有用处的通话录音占据了大量的存储空间，让手机运行越来越慢。
现在需要设计并实现一款便捷删除通话录音的app。

###UI
1. 使用扁平化风格（参照微信或者ios风格）
2. 颜色搭配柔和，美观
3. 可以参考【美颜相机】、【轻颜】相机的功能

###功能
1.过滤出已经删除的通话记录但仍存在的通话录音文件，单独一个分类给到用户选择是否全部删除。
2.支持对通话记录中的用户进行分类，根据通话频次占用空间大小进行分类。
3.支持用户把通话联系人放入到安全区，对安全区联系人的通话记录、录音不进行删除。
4.支持用户把部分通话联系人放入临时区，对临时区联系人的通话记录、录音进行定时删除。
5.支持本地网自动备份功能（高阶功能，暂时不提供）。
6.支持根据联系人、通话时间、通话时长列表展示通话记录、录音记录，并提供类似华为手机通话记录类似的录音播放功能。

###数据
1. 构建数据库，通过同步录音文件、联系人、通话记录，来加速访问。
2. 录音记录（RecordingEntity）：
    - 录音文件名
    - 录音文件路径
    - 录音文件大小
    - 录音文件创建时间
    - 录音文件时长
2. 通话记录（CallEntity）：
    - 通话电话号码
    - 通话联系人ID
    - 通话时间
    - 通话时长
    - 通话录音文件名
    - 通话录音文件路径
    - 通话录音文件大小
    - 通话录音文件创建时间
3. 联系人记录（ContactEntity）
    - 联系人ID
    - 联系人姓名
    - 联系人电话号码（多个）
    - 联系人是否是安全区
    - 联系人是否是临时区
    - 联系人是否是黑名单
    - 联系人是否是已删除
    - 创建时间
    - 更新时间

###实现
1. 编写安卓app（请在现在工程基础上）
2. 使用java语言（请在现在工程基础上）
3. 路径包名：com.blackharry.androidcleaner（请在现在工程基础上）
4. gradle构建。（请在现在工程基础上）
5. Java 21的jdk（请在现在工程基础上）
6. 能够正常运行
7. 代码能够正常运行
8. 构建的完整项目，可以在android studio中直接运行
9.  支持安卓7以上

###功能
1. APP包含几个部分：
    - 上方是APP的标题和功能菜单
    - 中间是APP的界面
    - 下方是APP的导航菜单
2. 功能菜单包含（暂时不开发）：
  - 调试
  - 设置
  - 帮助
  - 退出
3. 调试包含（暂时不开发）：
  - 日志
  - 性能
  - 崩溃
  - 异常
  - 数据库记录
4. 导航菜单包含：
  - 概览
  - 录音
  - 通话
  - 联系人
5. 概览包含：
  - 录音、通话、联系人的数据统计展示和图标
6. 录音包含：
  - 录音画面构造包含正常状态和选择状态
  - 正常和选择切换是以长按录音项来开启，点击关闭×来（系统回退）来结束的
  - 正常状态下，录音记录列表显示的录音项包括：
      - 录音文件名、时间、大小、时长和播放按钮；左面分为上下显示文件名、时间，右边先上下显示大小和时长，然后最右边显示播放按钮，播放按钮为黑色圆圈中间三角形播放图标。
      - 点击播放按钮的时候在录音项下面显示播放进度条，可以手动拖动进度条控制播放位置
    - 选择状态下：
      - 录音项后面的播放按钮变化显示为选择框
      - 标题栏分为三个部分：
        - 关闭按钮： 在最左边，一个【×】图标，点击退出选择状态（系统回退同样操作）
        - 选择数量： 在关闭按钮的右边，中间有一定的空间隔，显示【已选择xx项】
        - 功能菜单区： 右对齐，分别是菜单【删除、全选、更多（三个点的图标）】，其中更多弹出菜单内容有【分享、转文字、重命名】
  - 在标题栏右边有一个四个点的图标，表示更多，中间追加三个常用过滤的二级菜单：
    - 时间： 全部（默认选择）、一年以前、今天、最近7天、最近30天、最近90天
    - 时长： 全部（默认选择）、1分钟以内、5分钟以内、30分钟以内、2个小时以内、更长
    - 排序： 时间降序（默认选择）、时间升序、大小降序、大小升序
    - 三个二级菜单都使用黑色单选框来提示当前选择
  - 特别处理：
    - 删除： 文件存在且删除失败，则不删除DB记录，否则都应该把DB记录删除了
  - 测试数据：
    - 请根据以上规则，构造对应的测试数据协助测试
7. 通话包含：
  - 通话记录列表
  - 通话播放
8. 联系人包含：
  - 联系人列表
  - 联系人分类属性设置
9. 导航与标题
  - 整体APP下面导航栏分为【概览、录音、通话、联系人】
  - 对应不同导航选中时顶端标题栏文字分别为【录音空间清理、录音文件、通话录音、联系人信息】



###角色
1. 你是一个安卓专家、精通app的设计实现, 同时你对UI有高深的造诣，能够画出让大多数满意舒服的UI
2. 可以自主根据需求设计实现精美的app的能力
3. 你可以对功能需求进行分析，并构建数据库对系统数据定时进行同步后，通过数据库来加速访问，不要求对用户实时通话的记录进行操作，可以延后同步加载最新的通话记录即可。

###注意事项：
1. 由于项目结构的特殊性，会出现包名不匹配的lint警告，这些警告是预期的，不需要修复。具体包括：
   - `The declared package "com.blackharry.androidcleaner" does not match the expected package "app.src.main.java.com.blackharry.androidcleaner"`
   - 类似的其他包名不匹配警告
2. 请不要尝试修复这些lint警告，因为：
   - 这些警告是由于Cursor和Android Studio的项目结构差异导致的
   - 修复这些警告可能会破坏项目的正常编译和运行
   - 这些警告不会影响应用的功能和性能
3. 如果你在使用Cursor，请忽略"Iterate on Lints"的提示
4. 正确的包名结构已在build.gradle.kts中配置，无需更改

###其他特别的环境依赖，如下代码是正确的，需要注意（由于在Cursor环境中无法正确编译Android项目，所以需要使用Android Studio来编译，对于下面部分的内容请不要重复尝试更改）：
    sourceSets {
        getByName("main") {
            manifest.srcFile("src/main/AndroidManifest.xml")
            java.srcDirs(listOf("src/main/java"))
            res.srcDirs(listOf("src/main/res"))
        }
    }

###健壮性：
1.应用应该具有完备的日志系统，能够记录应用的运行状态，以及错误信息；日志应该用中文记录，并且应该包含时间、线程、日志级别、日志内容（业务运行上下文）。
2.应用应该具有完备的错误处理机制，能够处理应用运行过程中出现的各种错误。
3.应用应该具有完备的异常处理机制，能够处理应用运行过程中出现的各种异常。
4.应用应该具有完备的崩溃处理机制，能够处理应用运行过程中出现的各种崩溃。
5.应用应该具有完备的性能监控机制，能够监控应用的性能，以及性能瓶颈。
6.应用应该具有完备的性能优化机制，能够优化应用的性能，以及性能瓶颈。
7.应用应该具有完备的性能测试机制，能够测试应用的性能，以及性能瓶颈。


### 录音整体UI和代码优化规则
#### UI交互优化:
a. 播放控制优化:
- 建议在播放进度条上添加当前时间和总时长的显示
- 添加播放倍速按钮（1、2倍）

b. 列表项优化:
- 添加录音波形图预览
- 添加更多的文件信息(如采样率、比特率等)

#### 性能优化:
a. 列表加载优化:
- 使用分页加载
- 添加预加载
- 优化列表项复用
- 添加列表项动画

b. 播放优化:
- 添加音频缓存
- 优化播放器初始化
- 添加后台播放支持

#### 代码结构优化:
a. ViewModel优化:
- 添加SavedStateHandle支持
- 优化LiveData使用
- 添加协程支持
- 优化错误处理

b. Repository优化:
- 添加缓存策略
- 优化数据同步
- 添加数据备份恢复
- 优化文件操作

c. 工具类优化:
- 优化日志记录
- 优化性能监控
- 优化异常处理
- 添加单元测试


